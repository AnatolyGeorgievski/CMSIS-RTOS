# Операционная система CMSIS-RTOS R3v2 
Ядро операционной системы R3v2. Предназначена для работы на контроллерах ARM Cortex-M. Операционная система поддерживает мультизадачность, интерфейс CMSIS-RTOS. Поддерживает совместимость с С11: thread, mutex, condition,... Интерфейс C11 thread.h является нативным. 

## Характеристики

- Многозадачность и примитивы синхронизации выполнены таким образом, чтобы обспечить неблокирующее выполнение всех процессов. Lock-Free, Wait-free.
- Переключение (планирование) задач происходит в прерывании PendSV. Прерывание PendSV выполняется на хвосте любого прерывания. 
- Поддержка таймерных задач с компенсацией округления временных интервалов.
- Поддержка фоновых процессов (служб) типа сбор мусора при динамическом распределении памяти или фоновая обработка потоков сообщений. 
- Нативная поддержка очереди процессов наподобие OpenCL. Поддержка очереди позволяет реализовать модели асинхронного исполнения по событиям. При этом задачи (кернелы) не занимают стек. 
- Неблокирующие асинхронные очереди, динамическое распределение памяти malloc не блокирующее,  выделение памяти слайсами не блокирующее, без ожидания, без задержек. 
- поддержка протокола системного уровня для удаленного управления и сбора данных. 
- поддержка системного реестра, объектная модель данных. 
- поддержка бинарных форматов BACnet
- Отладка ядра и прикладных задач выполняется через подсистему Trace. На контроллерах Cortex-M поддерживается вывод отладочной информации через ITM SWO или UART.

## Введение
Интерфейс CMSIS-RTOS поддерживается, потому что стандарт. Надо отметить, что далеко не все примитивы синхронизации задач присутствующие в CMSIS задействованы в реальных задачах. На практике достаточным оказывается использоваие всего трех элементов: сигналы или флаги процессов, треды, асинхронные очереди. Практически, для реализации мультизадачности необходимо, чтобы ядро поддерживало ожидание семафора и ожидание сигналов. Все варианты ожидания ресурсов или очередей можно выстроить на семафорах, понимая под семафором - счетчик свободных рессурсов. Таким образом минимальный вариант планировщика обеспечивает ожидание флагов и семафоров. Флаги процесса являются неотъемлемой частью контекста процесса. Процесс это объкт у которого есть флаги, таймер ожидания, функция обработки потока.

В остальном мы передерживаемся совместимости со стандартом C11, который предлагает свой вариант тредов. 

## Интерфейсы С11
* поддержка threads.h...
* 


## Интерфейс CMSIS-RTOS 
## Интерфейс CMSIS-RTOS v2
* osMemoryPool
* Thread Flags

Copyright (c) 2008-2022. Anatoly Georgivskii
